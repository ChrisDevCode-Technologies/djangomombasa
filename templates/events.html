{% extends "layout/base.html" %}
{% load static text_utils %}

{% block title %}Events | Django Mombasa{% endblock %}

{% block extra_css %}
<style>
    .events-header {
        background-color: var(--dm-primary);
        padding-top: 72px;
    }
</style>
{% endblock %}

{% block content %}

<!-- Header -->
<section class="events-header text-white text-center py-5">
    <div class="container py-4">
        <h1 class="fw-bold mb-2">Events</h1>
        <p class="mb-0" style="opacity: 0.8;">Meetups, workshops, bootcamps, and more — come learn and build with us.</p>
    </div>
</section>

<!-- Upcoming Events -->
<section class="py-5">
    <div class="container py-3">
        <h2 class="fw-bold mb-4">Upcoming Events</h2>
        <div class="row g-4">
            {% for event in upcoming %}
            <div class="col-md-4">
                <div class="card h-100">
                    <div class="card-body d-flex flex-column">
                        <div class="d-flex flex-wrap gap-1 mb-3">
                            {% for tag in event.tags.all %}
                            <span class="badge bg-primary">{{ tag.name }}</span>
                            {% endfor %}
                        </div>
                        <h5 class="card-title fw-semibold"><a href="{% url 'app:event_detail' event.slug %}" class="text-decoration-none" style="color: inherit;">{{ event.name }}</a></h5>
                        <p class="text-muted small mb-2"><i class="bi bi-calendar-event me-1"></i> {{ event.date|date:"F j, Y · g:i A" }}</p>
                        <p class="card-text">{{ event.details|truncate_sentences:3 }}</p>
                        <div class="mt-auto d-flex gap-2">
                            <a href="{% url 'app:event_detail' event.slug %}" class="btn btn-outline-primary" style="width: fit-content;">Details</a>
                            {% if event.rsvp_link %}
                            <a href="{{ event.rsvp_link }}" class="btn btn-primary" style="width: fit-content;" target="_blank" rel="noopener">RSVP</a>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
            {% empty %}
            <div class="col-12">
                <p class="text-muted">No upcoming events right now. Check back soon!</p>
            </div>
            {% endfor %}
        </div>
    </div>
</section>

<!-- Past Events -->
{% if past %}
<section class="py-5" style="background-color: var(--dm-white);">
    <div class="container py-3">
        <h2 class="fw-bold mb-4">Past Events</h2>
        <div class="row g-4">
            {% for event in past %}
            <div class="col-md-4">
                <div class="card h-100" style="opacity: 0.75;">
                    <div class="card-body d-flex flex-column">
                        <div class="d-flex flex-wrap gap-1 mb-3">
                            {% for tag in event.tags.all %}
                            <span class="badge bg-secondary">{{ tag.name }}</span>
                            {% endfor %}
                        </div>
                        <h5 class="card-title fw-semibold"><a href="{% url 'app:event_detail' event.slug %}" class="text-decoration-none" style="color: inherit;">{{ event.name }}</a></h5>
                        <p class="text-muted small mb-2"><i class="bi bi-calendar-event me-1"></i> {{ event.date|date:"F j, Y" }}</p>
                        <p class="card-text">{{ event.details|truncate_sentences:3 }}</p>
                        <a href="{% url 'app:event_detail' event.slug %}" class="btn btn-outline-secondary mt-auto" style="width: fit-content;">Details</a>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>
{% endif %}

{% endblock %}
